---
title: mail basic
toc: true
date: 2020-10-23 11:23:19
tags:
	- mail
---

# Concepts

## 邮件服务器

分两种：

* SMTP 服务器，用于替用户发送和接收外面发送给本地用户的邮件（即发信过程中的官方处理系统，相当于邮局的接收部门）
* POP3/IMAP 服务器：用于帮助用户读取 SMTP 服务器接收进来的该用户的邮件（即收信过程中的官方处理系统，相当于取包裹的部门）

## 邮件客户端软件

负责与邮件服务器交互，帮助用户将邮件发送给 SMTP 服务器，或接收从 POP3/IMAP 服务器读取到的邮件。

以 163 邮箱为例，我们登陆的网页版、下载的手机版邮箱 app、PC 端邮箱 app 都是邮件客户端软件。

> 163 邮箱客户端软件中，目前页面收件箱显示的时间，其实是邮件被 SMTP 服务器处理的时间（`sendDate`），而并不是 POP3/IMAP 服务器收到邮件的时间（`receivedDate`）

## 邮件传输协议

SMTP、POP3、IMAP 也是支持邮件服务器和邮件客户端软件通信的传输协议。

* SMTP 协议：定义邮件客户端和 SMTP 服务器，两台 SMTP 服务器之间的通信规则。
* POP3 协议：客户端与 POP3 服务器之间的通信规则
* IMAP 协议：对 POP3 协议的扩展

## Example

一个QQ邮箱的A发给163邮箱B：qq邮箱用户用qq邮箱客户端发邮件给qq的SMTP服务器，然后qq的SMTP服务器会查询MX记录，找到163邮箱的SMTP服务器的信息，然后发送给它，163的SMTP收到邮件后判断该邮件是否属于该SMTP服务器的管辖范围，如果是的话就直接把邮件存储到收件人B的邮箱中。163邮箱用户就可以用客户端软件和163的POP3/IMAP建立连接通过POP3/IMAP协议查看邮件

![img](https://img.jbzj.com/file_images/article/201710/201710160942448.png)

邮件客户端程序和SMTP服务器发送邮件的区别：

客户端程序发送邮件给SMTP服务器需要用户信息验证，而SMTP服务器发送邮件给其他的SMTP服务器不需要用户账号信息验证