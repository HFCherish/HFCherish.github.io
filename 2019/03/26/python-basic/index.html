<!DOCTYPE html>
<html lang="Chinese">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0-rc1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"yoursite.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.15.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="great free learning website with quiz great online editor &amp; debugger Python学习资料&#x2F;文章&#x2F;指南整理 Zen of PythonBy typing import this, you can see the zen of python. Some need more explanation: Explicit is b">
<meta property="og:type" content="article">
<meta property="og:title" content="python basic">
<meta property="og:url" content="http://yoursite.com/2019/03/26/python-basic/index.html">
<meta property="og:site_name" content="Cherish&#39;s Blog">
<meta property="og:description" content="great free learning website with quiz great online editor &amp; debugger Python学习资料&#x2F;文章&#x2F;指南整理 Zen of PythonBy typing import this, you can see the zen of python. Some need more explanation: Explicit is b">
<meta property="og:locale">
<meta property="og:image" content="https://files.realpython.com/media/pyenv-pyramid.d2f35a19ded9.png">
<meta property="article:published_time" content="2019-03-26T04:43:42.000Z">
<meta property="article:modified_time" content="2022-10-24T05:22:27.332Z">
<meta property="article:author" content="Cherish">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://files.realpython.com/media/pyenv-pyramid.d2f35a19ded9.png">


<link rel="canonical" href="http://yoursite.com/2019/03/26/python-basic/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"Chinese","comments":true,"permalink":"http://yoursite.com/2019/03/26/python-basic/","path":"2019/03/26/python-basic/","title":"python basic"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>python basic | Cherish's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Cherish's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Zen-of-Python"><span class="nav-number">1.</span> <span class="nav-text">Zen of Python</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#PEP"><span class="nav-number">1.1.</span> <span class="nav-text">PEP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Naming-conventions"><span class="nav-number">1.1.1.</span> <span class="nav-text">Naming conventions</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#install"><span class="nav-number">2.</span> <span class="nav-text">install</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Brew-install"><span class="nav-number">2.1.</span> <span class="nav-text">Brew install</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#install-multiple-version"><span class="nav-number">2.2.</span> <span class="nav-text">install multiple version</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pip"><span class="nav-number">3.</span> <span class="nav-text">pip</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#common-used-commands"><span class="nav-number">3.1.</span> <span class="nav-text">common used commands</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Packaging"><span class="nav-number">4.</span> <span class="nav-text">Packaging</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#init-py"><span class="nav-number">4.1.</span> <span class="nav-text">__init__.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#setup-py"><span class="nav-number">4.2.</span> <span class="nav-text">setup.py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Packaging-for-users"><span class="nav-number">4.3.</span> <span class="nav-text">Packaging for users</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Some-special-grammars"><span class="nav-number">5.</span> <span class="nav-text">Some special grammars</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#if-name-%E2%80%98-main-%E2%80%99"><span class="nav-number">5.1.</span> <span class="nav-text">if _name__ &#x3D;&#x3D; ‘\_main__’</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#else"><span class="nav-number">5.2.</span> <span class="nav-text">else</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#class"><span class="nav-number">6.</span> <span class="nav-text">class</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#new-vs-init"><span class="nav-number">6.1.</span> <span class="nav-text">__new__ vs __init__</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#del"><span class="nav-number">6.2.</span> <span class="nav-text">__del__</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#private"><span class="nav-number">6.3.</span> <span class="nav-text">private</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#class-methods-vs-instance-methods-vs-static-methods"><span class="nav-number">6.4.</span> <span class="nav-text">class methods vs instance methods vs static methods</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Properties"><span class="nav-number">6.5.</span> <span class="nav-text">Properties</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#call-method"><span class="nav-number">6.5.1.</span> <span class="nav-text">__call__ method</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#str-vs-repr"><span class="nav-number">6.5.2.</span> <span class="nav-text">__str__ vs __repr__</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Opening-Files"><span class="nav-number">7.</span> <span class="nav-text">Opening Files</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Iterable-containers"><span class="nav-number">8.</span> <span class="nav-text">Iterable containers</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#List-string-tuple-slicing"><span class="nav-number">8.1.</span> <span class="nav-text">List&#x2F;string&#x2F;tuple slicing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#List-Comprehensions"><span class="nav-number">8.2.</span> <span class="nav-text">List Comprehensions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#all-amp-any"><span class="nav-number">8.2.1.</span> <span class="nav-text">all &amp; any</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tuple"><span class="nav-number">8.3.</span> <span class="nav-text">Tuple</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Generator"><span class="nav-number">8.4.</span> <span class="nav-text">Generator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set"><span class="nav-number">8.5.</span> <span class="nav-text">Set</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#String-format"><span class="nav-number">9.</span> <span class="nav-text">String format</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Functions"><span class="nav-number">10.</span> <span class="nav-text">Functions</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Function-Arguments"><span class="nav-number">10.1.</span> <span class="nav-text">Function Arguments</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lambda"><span class="nav-number">10.2.</span> <span class="nav-text">Lambda</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-used-functors"><span class="nav-number">10.2.1.</span> <span class="nav-text">Common used functors:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Decorator"><span class="nav-number">10.3.</span> <span class="nav-text">Decorator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Generator-1"><span class="nav-number">10.4.</span> <span class="nav-text">Generator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#async-await"><span class="nav-number">10.5.</span> <span class="nav-text">async&#x2F;await</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#eventloop"><span class="nav-number">10.5.1.</span> <span class="nav-text">eventloop</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#async-amp-decorator"><span class="nav-number">10.5.2.</span> <span class="nav-text">async &amp; decorator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Awaitable-amp-Coroutine-class"><span class="nav-number">10.5.3.</span> <span class="nav-text">Awaitable &amp; Coroutine class</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Some-convinent-functions"><span class="nav-number">10.6.</span> <span class="nav-text">Some convinent functions</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Major-3rd-Party-Libraries"><span class="nav-number">11.</span> <span class="nav-text">Major 3rd-Party Libraries</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Issues"><span class="nav-number">12.</span> <span class="nav-text"># Issues</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Make-class-method-return-self-type"><span class="nav-number">12.1.</span> <span class="nav-text">Make class method return self type</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Python-3-7-from-future-import-annotations"><span class="nav-number">12.1.1.</span> <span class="nav-text">Python 3.7+: from __future__ import annotations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python-lt-3-7-use-a-string"><span class="nav-number">12.1.2.</span> <span class="nav-text">Python &lt;3.7: use a string</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Circular-import"><span class="nav-number">12.2.</span> <span class="nav-text">Circular import</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Cherish</p>
  <div class="site-description" itemprop="description">从心所欲不逾矩</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">63</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">71</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="Chinese">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/26/python-basic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cherish">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cherish's Blog">
      <meta itemprop="description" content="从心所欲不逾矩">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="python basic | Cherish's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          python basic
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-26 12:43:42" itemprop="dateCreated datePublished" datetime="2019-03-26T12:43:42+08:00">2019-03-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-10-24 13:22:27" itemprop="dateModified" datetime="2022-10-24T13:22:27+08:00">2022-10-24</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>0</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><a href="https://www.sololearn.com/play/python" target="_blank" rel="noopener">great free learning website with quiz</a></p>
<p><a href="http://pythontutor.com/live.html#mode=edit" target="_blank" rel="noopener">great online editor &amp; debugger</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/41381773" target="_blank" rel="noopener">Python学习资料/文章/指南整理</a></p>
<h1 id="Zen-of-Python"><a href="#Zen-of-Python" class="headerlink" title="Zen of Python"></a>Zen of Python</h1><p>By typing <code>import this</code>, you can see the zen of python. Some need more explanation:</p>
<p>Explicit is better than implicit: It is best to spell out exactly what your code is doing. This is why adding a numeric string to an integer requires explicit conversion, rather than having it happen behind the scenes, as it does in other languages.<br>Flat is better than nested: Heavily nested structures (lists of lists, of lists, and on and on…) should be avoided.<br>Errors should never pass silently: In general, when an error occurs, you should output some sort of error message, rather than ignoring it.</p>
<h2 id="PEP"><a href="#PEP" class="headerlink" title="PEP"></a>PEP</h2><p><strong>Python Enhancement Proposals (PEP)</strong> are suggestions for improvements to the language, made by experienced Python developers.</p>
<p><strong>PEP 8</strong> is a style guide on the subject of writing readable code<br><strong>PEP 20</strong>: The Zen of Python<br><strong>PEP 257</strong>: Style Conventions for Docstrings</p>
<h3 id="Naming-conventions"><a href="#Naming-conventions" class="headerlink" title="Naming conventions"></a>Naming conventions</h3><p><strong>PEP 8</strong> is a style guide on the subject of writing readable code. It contains a number of guidelines in reference to variable names, which are summarized here:<br>- modules should have short, all-lowercase names;<br>- class names should be in the CapWords style;<br>- most variables and function names should be lowercase_with_underscores;<br>- constants (variables that never change value) should be CAPS_WITH_UNDERSCORES;<br>- names that would clash with Python keywords (such as ‘class’ or ‘if’) should have a trailing underscore.</p>
<h1 id="install"><a href="#install" class="headerlink" title="install"></a>install</h1><h2 id="Brew-install"><a href="#Brew-install" class="headerlink" title="Brew install"></a>Brew install</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install python</span><br></pre></td></tr></table></figure>
<h2 id="install-multiple-version"><a href="#install-multiple-version" class="headerlink" title="install multiple version"></a>install multiple version</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># use pyenv to install multiple version</span></span><br><span class="line">$ brew update</span><br><span class="line">$ brew install pyenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clone the repository to to get the latest version of pyenv</span></span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/pyenv/pyenv.git ~/.pyenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># define envs</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'export PYENV_ROOT="$HOME/.pyenv"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'export PATH="$PYENV_ROOT/bin:$PATH"'</span> &gt;&gt; ~/.zshrc</span><br><span class="line">$ <span class="built_in">source</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># get all versions that can be installed</span></span><br><span class="line">$ pyenv install --list</span><br><span class="line">$ pyenv install 3.7</span><br><span class="line"></span><br><span class="line"><span class="comment"># all current installed</span></span><br><span class="line">$ pyenv versions</span><br><span class="line"><span class="comment"># current active</span></span><br><span class="line">$ pyenv version</span><br><span class="line"></span><br><span class="line"><span class="comment"># set as gloabl version</span></span><br><span class="line">$ pyenv global 3.7</span><br><span class="line"><span class="comment"># set a local version </span></span><br><span class="line"><span class="comment"># This command creates a .python-version file in your current directory. If you have pyenv active in your environment, this file will automatically activate this version for you.</span></span><br><span class="line">$ pyenv <span class="built_in">local</span> 3.7</span><br><span class="line"><span class="comment"># set as shell version</span></span><br><span class="line"><span class="comment"># This command activates the version specified by setting the PYENV_VERSION environment variable. This command overwrites any applications or global settings you may have. If you want to deactivate the version, you can use the --unset flag.</span></span><br><span class="line">$ pyenv shell 3.7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># check the version</span></span><br><span class="line">$ python3 --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># add this to ~/.zshrc if the global command not work, to active the pyenv shell features</span></span><br><span class="line">$ <span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span></span><br></pre></td></tr></table></figure>
<p><img src="https://files.realpython.com/media/pyenv-pyramid.d2f35a19ded9.png" alt="Pyenv pyramid for order of resolution"></p>
<p>Other pythons installed:</p>
<ul>
<li>/usr/local/bin</li>
<li>/usr/local/Cellar</li>
</ul>
<h1 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h1><p><a href="https://pypi.org/project/pip/" target="_blank" rel="noopener">pip</a> is the package installer for python.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install package-name</span><br></pre></td></tr></table></figure>
<p>On windows, to use <code>pip</code> after python installation, you need to config both the python &amp; pip path.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:c/users/xiaoming/AppData/Programs/Python/Python37:c/users/xiaoming/AppData/Programs/Python/Python37/Scripts</span><br></pre></td></tr></table></figure>
<h2 id="common-used-commands"><a href="#common-used-commands" class="headerlink" title="common used commands"></a>common used commands</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list all installed packages</span></span><br><span class="line">$ pip freeze</span><br><span class="line"></span><br><span class="line"><span class="comment"># downgrade pip</span></span><br><span class="line">$ python -m install pip=20.2.4</span><br><span class="line"><span class="comment"># upgrade pip</span></span><br><span class="line">$ python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure>
<h1 id="Packaging"><a href="#Packaging" class="headerlink" title="Packaging"></a>Packaging</h1><p>In Python, the term <strong>packaging</strong> refers to putting modules you have written in a standard format, so that other programmers can install and use them with ease.<br>This involves use of the modules <strong>setuptools</strong> and <strong>distutils</strong>.</p>
<ol>
<li><p>organize existing files correctly. Place all of the files you want to put in a library in the same parent directory. This directory should also contain a file called <strong>__init__.py</strong>, which can be blank but must be present in the directory. <code>__init__.py</code> turns a directory to a module.<br>This directory goes into another directory containing the readme and license, as well as an important file called <strong>setup.py</strong>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SoloLearn&#x2F;</span><br><span class="line"> LICENSE.txt</span><br><span class="line"> README.txt</span><br><span class="line"> setup.py</span><br><span class="line"> sololearn&#x2F;</span><br><span class="line">    __init__.py</span><br><span class="line">    sololearn.py</span><br><span class="line">    sololearn2.py</span><br></pre></td></tr></table></figure>
</li>
<li><p>Write the <strong>setup.py</strong> file. This contains information necessary to assemble the package so it can be uploaded to <strong>PyPI</strong> and installed with <strong>pip</strong> (name, version, etc.).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> setup(</span><br><span class="line">   name=<span class="string">'SoloLearn'</span>, </span><br><span class="line">   version=<span class="string">'0.1dev'</span>,</span><br><span class="line">   packages=[<span class="string">'sololearn'</span>,],</span><br><span class="line">   license=<span class="string">'MIT'</span>, </span><br><span class="line">   long_description=open(<span class="string">'README.txt'</span>).read(),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Write Other Files   </p>
</li>
<li><p>Build a source distribution, use the command line to navigate to the directory containing setup.py, and run the command <code>python setup.py sdist</code>.</p>
<ol>
<li>Run <code>python setup.py bdist</code> or, for Windows, <code>python setup.py bdist_wininst</code> to build a binary distribution.</li>
</ol>
</li>
<li><p>Upload the package to <strong>PyPI</strong>. Use <code>python setup.py register</code>, followed by <code>python setup.py sdist upload</code> to upload a package.</p>
</li>
<li><p>install a package with <code>python setup.py install</code>.</p>
</li>
</ol>
<h2 id="init-py"><a href="#init-py" class="headerlink" title="__init__.py"></a>__init__.py</h2><p><a href="https://www.cnblogs.com/Lands-ljk/p/5880483.html" target="_blank" rel="noopener">Python <strong>init</strong>.py 作用详解</a></p>
<p><code>__init__.py</code> 文件的作用是将文件夹变为一个Python模块,Python 中的每个模块的包中，都有<code>__init__.py</code> 文件。</p>
<p>通常<code>__init__.py</code> 文件为空，但是我们还可以为它增加其他的功能。我们在导入一个包时，实际上是导入了它的<code>__init__.py</code>文件。这样我们可以在<code>__init__.py</code>文件中批量导入我们所需要的模块，而不再需要一个一个的导入。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># package</span><br><span class="line"># __init__.py</span><br><span class="line">import re</span><br><span class="line">import urllib</span><br><span class="line">import sys</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"># a.py</span><br><span class="line">import package </span><br><span class="line">print(package.re, package.urllib, package.sys, package.os)</span><br></pre></td></tr></table></figure>
<p>注意这里访问<code>__init__.py</code>文件中的引用文件，需要加上包名。</p>
<p><code>__init__.py</code>中还有一个重要的变量，<code>__all__</code>, 它用来将模块全部导入。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># __init__.py</span><br><span class="line">__all__ &#x3D; [&#39;os&#39;, &#39;sys&#39;, &#39;re&#39;, &#39;urllib&#39;]</span><br><span class="line"></span><br><span class="line"># a.py</span><br><span class="line">from package import *</span><br></pre></td></tr></table></figure>
<p>这时就会把注册在<code>__init__.py</code>文件中<code>__all__</code>列表中的模块和包导入到当前文件中来。</p>
<p>可以了解到，<code>__init__.py</code>主要控制包的导入行为。</p>
<h2 id="setup-py"><a href="#setup-py" class="headerlink" title="setup.py"></a>setup.py</h2><p><a href="https://setuptools.readthedocs.io/en/latest/" target="_blank" rel="noopener">setuptools</a> is the packaging tool for python (like maven/gradle for java?)</p>
<p>When coding in local, you can use <code>pip install</code> to install dependency. However, when deploy a python project, you need to package all dependency, modules into one project. You need <code>setup.py</code>.</p>
<p>When organize python in modules, you need to know and import the function in other modules. In compilation stage, you need to feel the other modules&amp;packages. <code>setup.py</code> does the magic. (This is my guess)</p>
<h2 id="Packaging-for-users"><a href="#Packaging-for-users" class="headerlink" title="Packaging for users"></a>Packaging for users</h2><p>For normal users who don’t have python on computer, we need to convert scripts to executables for them.</p>
<p>For Windows, <strong>py2exe</strong> or <strong>PyInstaller</strong> or <strong>cx_Freeze</strong> can be used to package a Python script, along with the libraries it requires, into a single executable.<br>For Macs, use <strong>py2app</strong>, <strong>PyInstaller</strong> or <strong>cx_Freeze</strong>.</p>
<h1 id="Some-special-grammars"><a href="#Some-special-grammars" class="headerlink" title="Some special grammars"></a>Some special grammars</h1><h2 id="if-name-‘-main-’"><a href="#if-name-‘-main-’" class="headerlink" title="if _name__ == ‘\_main__’"></a>if _<em>name__ == ‘\</em>_main__’</h2><p><a href="https://blog.csdn.net/yjk13703623757/article/details/77918633" target="_blank" rel="noopener">如何简单地理解Python中的if _<em>name__ == ‘\</em>_main__’</a></p>
<p>If you are <code>test.py</code>, then other module knows you as <code>__name__==&#39;test&#39;</code>, and you know yourself as <code>__name==&#39;__main__&#39;</code>.</p>
<p>The code block in <code>if __name__ == &#39;__main__&#39;</code> will only be executed when the file is executed directly. If other module import <code>test.py</code> as module, the code block won’t be executed.</p>
<p>It’s kind of like main function in java/c, but with big difference. Python is <strong>a script language</strong> — interpretive execution, which can be run without any so-called main entry. You don’t need to make <code>test.py</code> runnable by providing <code>main</code>, but you can provide <code>if __name__ == &#39;__main__&#39;</code> if you want this block only executed when called directly rather than as module.</p>
<h2 id="else"><a href="#else" class="headerlink" title="else"></a>else</h2><p>The <strong>else</strong> statement can be used in:</p>
<ul>
<li>the <strong>if</strong> statement</li>
<li>a <strong>for</strong> or <strong>while</strong> loop, the code within it is called if the loop finishes normally / completely (when a <strong>break</strong> statement does not cause an exit from the loop).</li>
<li>the <strong>try/except</strong> statements, the code within it is only executed if no error occurs in the <strong>try</strong> statement.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">if_else</span><span class="params">(a)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> a == <span class="string">'if'</span>:</span><br><span class="line">    print(<span class="string">'this is in if'</span>)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'this is not if!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">for_else</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">2</span>:</span><br><span class="line">      <span class="comment"># print('Will get here. The else won\'t be executed')</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'first for finish completely'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">10</span>:</span><br><span class="line">      <span class="comment"># print('Never get here. The else will be executed')</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'second for finish completely'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">try_else</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">5</span>/<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'there is exception, the first else won\'t be executed'</span>)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'first try finished successfully'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">5</span>/<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'there is no exception, the else will be executed'</span>)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'second try finished successfully'</span>)</span><br><span class="line"></span><br><span class="line">if_else(<span class="string">'not_if'</span>) <span class="comment"># this is not if!</span></span><br><span class="line">for_else() <span class="comment"># second for finish completely</span></span><br><span class="line">try_else()</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">there is exception, the first else won't be executed</span></span><br><span class="line"><span class="string">5.0</span></span><br><span class="line"><span class="string">second try finished successfully</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h1 id="class"><a href="#class" class="headerlink" title="class"></a>class</h1><p>Classes are created using the keyword <strong>class</strong> and an indented block, which contains class <strong>methods</strong> (which are functions). All methods must have <strong>self</strong> as their first parameter, you do not need to include it when you call the methods. Within a method definition, <strong>self</strong> refers to the instance calling the method.</p>
<p>To inherit a class from another class, put the superclass name in parentheses after the class name.</p>
<p>Classes can also have <strong>class attributes</strong>, created by assigning variables within the body of the class. These can be accessed either from instances of the class, or the class itself.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, color)</span>:</span></span><br><span class="line">    self.name = name</span><br><span class="line">    self.color = color</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">shout</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(<span class="string">'ha'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(Animal)</span>:</span></span><br><span class="line">  legs = <span class="number">4</span>    <span class="comment"># the class attribute</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">shout</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(<span class="string">'wong'</span>)</span><br><span class="line">    super().shout()    <span class="comment"># call super method</span></span><br><span class="line"></span><br><span class="line">Dog.legs    <span class="comment"># 4</span></span><br><span class="line">d = Dog(<span class="string">'heidou'</span>, <span class="string">'black'</span>)</span><br><span class="line">d.legs    <span class="comment"># 4</span></span><br><span class="line">d.name     <span class="comment"># 'heidou'</span></span><br><span class="line">d.shout()    </span><br><span class="line"><span class="comment"># wong</span></span><br><span class="line"><span class="comment"># ha</span></span><br></pre></td></tr></table></figure>
<h2 id="new-vs-init"><a href="#new-vs-init" class="headerlink" title="__new__ vs __init__"></a><code>__new__</code> vs <code>__init__</code></h2><p><a href="https://www.agiliq.com/blog/2012/06/__new__-python/" target="_blank" rel="noopener">__new__ in python</a></p>
<p>_<em>new__ is a static method which creates an instance. It allocates memory for an object. \</em>_init__ initialize the value of the object (instance). <code>__new__</code> is rarely overriden.</p>
<p>When you are instantiate an instance by calling the class, the <code>__new__</code> gets called first to create the object in memory, and then <code>__init__</code> is called to initialize it.</p>
<p>__new__ must return the created object. Only when <code>__new__</code> returns the created instance then <code>__init__</code> gets called. If <code>__new__</code> does not return an instance then <code>__init__</code> would not be called.</p>
<p>The <code>__new__</code> definition:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__new__(cls, *args, **kwargs)</span><br></pre></td></tr></table></figure>
<p>An example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime <span class="keyword">as</span> dt</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line">    print(cls)</span><br><span class="line">    print(args)</span><br><span class="line">    print(kwargs)</span><br><span class="line">    obj = object.__new__(cls)</span><br><span class="line">    setattr(obj, <span class="string">'created_at'</span>, dt.datetime.now())</span><br><span class="line">    <span class="keyword">return</span> obj <span class="comment"># if no return here, __init__ won't be called later</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a, named)</span>:</span></span><br><span class="line">    print(<span class="string">'in init'</span>)</span><br><span class="line">    self.a = a</span><br><span class="line">    self.b = named</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'a=&#123;0&#125;, b=&#123;1&#125;, created_at: &#123;2&#125;'</span>.format(self.a, self.b, self.created_at)</span><br><span class="line"></span><br><span class="line">a = A(<span class="number">1</span>, named=<span class="number">2</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&lt;class '__main__.A'&gt;</span></span><br><span class="line"><span class="string">(1,)</span></span><br><span class="line"><span class="string">&#123;'named': 2&#125;</span></span><br><span class="line"><span class="string">in init</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(a) <span class="comment"># a=1, b=2, created_at: 2020-10-19 15:22:19.558501</span></span><br></pre></td></tr></table></figure>
<h2 id="del"><a href="#del" class="headerlink" title="__del__"></a><code>__del__</code></h2><p>Destruction of an object occurs when its <strong>reference count</strong> reaches zero.</p>
<p>The <strong>del</strong> statement reduces the reference count of an object by one, and this often leads to its deletion.<br>The magic method for the <strong>del</strong> statement is <code>__del__</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">5</span></span><br><span class="line"><span class="keyword">del</span> a</span><br></pre></td></tr></table></figure>
<h2 id="private"><a href="#private" class="headerlink" title="private"></a>private</h2><p>The Python philosophy is often stated as <strong>“we are all consenting adults here”</strong>, meaning that you shouldn’t put arbitrary restrictions on accessing parts of a class. Hence there are no ways of enforcing a method or attribute be strictly private. However, there are ways to discourage people from accessing parts of a class, such as by denoting that it is an implementation detail, and should be used at their own risk.</p>
<p>Weakly private methods and attributes have a <strong>single underscore</strong> at the beginning. This signals that they are private, and <strong>shouldn’t be</strong> used by external code. Its only actual effect is that <strong>from module_name import *</strong> won’t import variables that start with a single underscore.</p>
<p>Strongly private methods and attributes have a <strong>double underscore</strong> at the beginning of their names. This causes their names to be mangled, which means that they can’t be accessed from outside the class by the name. The purpose of this isn’t to ensure that they are kept private, but to avoid bugs if there are subclasses that have methods or attributes with the same names. Basically, Python protects those members by internally changing the name to include the class name.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">  __egg = <span class="number">7</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a)</span>:</span></span><br><span class="line">    self.__a = a</span><br><span class="line"></span><br><span class="line">A._A__egg <span class="comment"># 7</span></span><br><span class="line">a = A(<span class="string">'a'</span>)</span><br><span class="line">a._A__a <span class="comment"># 'a'</span></span><br></pre></td></tr></table></figure>
<h2 id="class-methods-vs-instance-methods-vs-static-methods"><a href="#class-methods-vs-instance-methods-vs-static-methods" class="headerlink" title="class methods vs instance methods vs static methods"></a>class methods vs instance methods vs static methods</h2><p><strong>Instance methods</strong> are called by a instance, which is passed to the <strong>self</strong> parameter of the method.</p>
<p><strong>Class methods</strong> are called by a class, which is passed to the <strong>cls</strong> parameter of the method.<br>A common use of these are factory methods, which instantiate an instance of a class, using different parameters than those usually passed to the class constructor.<br>Class methods are marked with a <strong>classmethod decorator</strong>.</p>
<p><strong>Static methods</strong> are similar to class methods, except they don’t receive any additional arguments; they are identical to normal functions that belong to a class.<br>They are marked with the <strong>staticmethod</strong> decorator.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a, b)</span>:</span></span><br><span class="line">    self.a = a</span><br><span class="line">    self.b = b</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(self.a * self.b)</span><br><span class="line"><span class="meta">  @classmethod</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">new_square</span><span class="params">(cls, a)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> cls(a, a)</span><br><span class="line"><span class="meta">  @staticmethod</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">validate_int</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span> isinstance(a, int), <span class="string">'must be int'</span></span><br><span class="line"></span><br><span class="line">r = Rectangle(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">r.area() <span class="comment"># 20</span></span><br><span class="line">s = Rectangle.new_square(<span class="number">4</span>)</span><br><span class="line">s.area() <span class="comment"># 16</span></span><br><span class="line">Rectangle.validate_int(<span class="string">'fd'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h2><p><strong>Properties</strong> are created by putting the <strong>property</strong> decorator above a method, which means when the instance attribute with the same name as the method is accessed, the method will be called instead.<br>One common use of a property is to make an attribute <strong>read-only</strong>.</p>
<p>Properties can also be set by defining <strong>setter/getter</strong> functions.<br>The <strong>setter</strong> function sets the corresponding property’s value. To define a <strong>setter</strong>, you need to use a decorator of the same name as the property, followed by a dot and the <strong>setter</strong> keyword.</p>
<p>​<code>`</code>python<br>class Pizza:<br>  def <strong>init</strong>(self, a):<br>    self._a = a<br>  @property<br>  def a_list(self):<br>    return [self._a] * 10<br>  @a_list.setter<br>  def a_list(self, value):<br>    self._a = value[0]</p>
<p>p = Pizza(7)<br>p.a_list # [7, 7, 7, 7, 7, 7, 7, 7, 7, 7]<br>p.a_list = [1]<br>p.a_list # [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">## Magic Methods</span><br><span class="line"></span><br><span class="line">**Magic methods** are special methods which have **double underscores** at the beginning and end of their names. They are used to create functionality that can&#39;t be represented as a normal method.</span><br><span class="line"></span><br><span class="line">&#96;__init__&#96; is the constructor.</span><br><span class="line"></span><br><span class="line">Magic methods for common operators (operator overload):</span><br><span class="line"></span><br><span class="line">&#96;__add__&#96; for -</span><br><span class="line">&#96;__sub__&#96; for -</span><br><span class="line">&#96;__mul__&#96; for *</span><br><span class="line">&#96;__truediv__&#96; for &#x2F;</span><br><span class="line">&#96;__floordiv__&#96; for &#x2F;&#x2F;</span><br><span class="line">&#96;__mod__&#96; for %</span><br><span class="line">&#96;__pow__&#96; for **</span><br><span class="line">&#96;__and__&#96; for &amp;</span><br><span class="line">&#96;__xor__&#96; for ^</span><br><span class="line">&#96;__or__&#96; for |</span><br><span class="line"></span><br><span class="line">Magic methods for comparisons (If &#96;__ne__&#96; is not implemented, it returns the opposite of &#96;__eq__&#96;):</span><br><span class="line"></span><br><span class="line">&#96;__lt__&#96; for &lt;</span><br><span class="line">&#96;__le__&#96; for &lt;&#x3D;</span><br><span class="line">&#96;__eq__&#96; for &#x3D;&#x3D;</span><br><span class="line">&#96;__ne__&#96; for !&#x3D;</span><br><span class="line">&#96;__gt__&#96; for &gt;</span><br><span class="line">&#96;__ge__&#96; for &gt;&#x3D;</span><br><span class="line"></span><br><span class="line">Magic methods for making classes act like containers:</span><br><span class="line">&#96;__len__&#96; for len()</span><br><span class="line">&#96;__getitem__&#96; for indexing</span><br><span class="line">&#96;__setitem__&#96; for assigning to indexed values</span><br><span class="line">&#96;__delitem__&#96; for deleting indexed values</span><br><span class="line">&#96;__iter__&#96; for iteration over objects (e.g., in for loops)</span><br><span class="line">&#96;__contains__&#96; for in</span><br><span class="line"></span><br><span class="line">Magic methods for converting objects to built-in types:</span><br><span class="line">&#96;__int__&#96; for int()</span><br><span class="line">&#96;__str__&#96; for str()</span><br><span class="line"></span><br><span class="line">### &#96;r&#96; methods&lt;a name &#x3D; &quot;r-methods&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">There are equivalent **r** methods for all magic methods that overloads operators. For example, the expression **x + y** is translated into **x.__add__(y)**. However, if x hasn&#39;t implemented __add__, and x and y are of different types, then **y.__radd__(x)** is called.</span><br><span class="line"></span><br><span class="line">&quot;r&quot; stands for &quot;right&quot;, meaning that the operator passed is on the right. If the conversion of the 1st type to the 2nd isn&#39;t supported, it simply tries calling the inverse one (2nd conversion to the 1st) for the other type.</span><br><span class="line"></span><br><span class="line">**r** methods can be used when you want to overload operator between a thirt lib type and your type. Since you may not modify the third library, you can add the reverse **r** method in your type.</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;python</span><br><span class="line">class PairNumber:</span><br><span class="line">def __init__(self, n1, n2):</span><br><span class="line">  self.n1 &#x3D; n1</span><br><span class="line">  self.n2 &#x3D; n2</span><br><span class="line">def __floordiv__(self, other):</span><br><span class="line">  return PairNumber(self.n1&#x2F;&#x2F;other.n1, self.n2 &#x2F;&#x2F; other.n2)</span><br><span class="line">def __rtruediv__(self, other):</span><br><span class="line">  return PairNumber(other&#x2F;self.n1, other&#x2F;self.n2)</span><br><span class="line">def __repr__(self):</span><br><span class="line">  return &#39;PairNumber&#123;0&#125;&#39;.format((self.n1, self.n2))</span><br><span class="line">def __str__(self):</span><br><span class="line">  return str((self.n1, self.n2))</span><br><span class="line"></span><br><span class="line">class IntPairNumber(PairNumber):</span><br><span class="line">def __int__(self):</span><br><span class="line">  return self.n1 + self.n2</span><br><span class="line"></span><br><span class="line">p1 &#x3D; IntPairNumber(4, 10)</span><br><span class="line">p2 &#x3D; IntPairNumber(3, 19)</span><br><span class="line">p1 &#x2F;&#x2F; p2 # PairNumber(1, 0)</span><br><span class="line">print(p1 &#x2F;&#x2F; p2) # (1, 0)</span><br><span class="line">str(2 &#x2F; p1)        # PairNumber(0.5, 0.2)</span><br><span class="line">int(p1)                # 14</span><br></pre></td></tr></table></figure>
<h3 id="call-method"><a href="#call-method" class="headerlink" title="__call__ method"></a><code>__call__</code> method</h3><p><code>__call__</code> method can call an object as a function. Thus you can transfer the object as a func parameter in a function.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PairNumber</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n1, n2)</span>:</span></span><br><span class="line">    self.n1 = n1</span><br><span class="line">    self.n2 = n2</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> self.n1 + self.n2 + other</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addTwice</span><span class="params">(func, other)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> func(other) + other</span><br><span class="line"></span><br><span class="line">p1 = PairNumber(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">p1(<span class="number">4</span>)        <span class="comment"># 7</span></span><br><span class="line">addTwice(p1, <span class="number">4</span>)    <span class="comment"># 11</span></span><br></pre></td></tr></table></figure>
<h3 id="str-vs-repr"><a href="#str-vs-repr" class="headerlink" title="__str__ vs __repr__"></a><code>__str__</code> vs <code>__repr__</code></h3><p>In short, the goal of <code>__repr__</code> is to be unambiguous and <code>__str__</code> is to be readable. If <code>__repr__</code> is defined, and <code>__str__</code> is not, the object will behave as though <code>__str__=__repr__</code>.</p>
<p>The commandline will show the content in <code>__repr__</code> when you simply type the object. And when print(some_obj), it will show the content in <code>__str__</code> of that object. So many would say: <code>__repr__</code> is for developers, <code>__str__</code> is for customers. e.g. obj = uuid.uuid1(), obj._<em>str\</em>_() is “2d7fc7f0-7706-11e9-94ae-0242ac110002” and obj.__repr__() is “UUID(‘2d7fc7f0-7706-11e9-94ae-0242ac110002’)”.</p>
<p><strong>To sum up</strong>: implement <code>__repr__</code> for any class you implement. This should be second nature. Implement <code>__str__</code> if you think it would be useful to have a string version which errs on the side of readability.</p>
<p>See example in <a href="#r-methods">r <strong>method</strong></a></p>
<h1 id="Opening-Files"><a href="#Opening-Files" class="headerlink" title="Opening Files"></a>Opening Files</h1><p>You can specify the <strong>mode</strong> used to open a file by applying a second argument to the <strong>open</strong> function.<br>Sending “r” means open in read mode, which is the default.<br>Sending “w” means write mode, for <strong><em>rewriting</em></strong> the contents of a file.<br>Sending “a” means append mode, for adding new content to the end of the file.</p>
<p>Adding “b” to a mode opens it in <strong>binary</strong> mode, which is used for non-text files (such as image and sound files).<br><strong>For example:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># write mode</span></span><br><span class="line">open(<span class="string">"filename.txt"</span>, <span class="string">"w"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read mode</span></span><br><span class="line">open(<span class="string">"filename.txt"</span>, <span class="string">"r"</span>)</span><br><span class="line">open(<span class="string">"filename.txt"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># binary write mode</span></span><br><span class="line">open(<span class="string">"filename.txt"</span>, <span class="string">"wb"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>You can use the + sign with each of the modes above to give them extra access to files. For example, r+ opens the file for both reading and writing.</p>
<p>Use <code>help(open)</code> to see the complete file modes supported.</p>
</blockquote>
<ul>
<li><p>“r”<br>Read from file - YES<br>Write to file - NO<br><strong>Create file if not exists - NO</strong><br>Truncate file to zero length - NO<br>Cursor position - BEGINNING</p>
</li>
<li><p>“r+”  ====&gt; Opens a file for both reading and writing (write from the current cursor, that is, if you already call <code>file.read()</code>, then it means cursor is already at the end, then the writing is appending. However, if you start with <code>file.write()</code>, the cursor is at the beginning, thus it will <strong><em>rewrite</em></strong> from the beginning)<br>Read from file - YES<br>Write to file - YES<br><strong>Create file if not exists - NO</strong><br><strong>Truncate file to zero length - NO</strong><br>Cursor position - BEGINNING</p>
</li>
<li><p>“w”<br>Read from file - NO<br>Write to file - YES<br><strong>Create file if not exists - YES</strong><br><strong>Truncate file to zero length - YES</strong><br>Cursor position - BEGINNING</p>
</li>
<li><p>“w+” ===&gt; Opens a file for both writing and reading<br>Read from file - YES<br>Write to file - YES<br><strong>Create file if not exists - YES</strong><br><strong>Truncate file to zero length - YES</strong><br>Cursor position - BEGINNING</p>
</li>
<li><p>“a”<br>Read from file - NO<br>Write to file - YES<br><strong>Create file if not exists - YES</strong><br><strong>Truncate file to zero length - NO</strong><br>Cursor position - END</p>
</li>
<li><p>“a+” ===&gt; Opens a file for both appending and reading<br>Read from file - YES<br>Write to file - YES<br><strong>Create file if not exists - YES</strong><br><strong>Truncate file to zero length - NO</strong><br>Cursor position - END</p>
</li>
</ul>
<h1 id="Iterable-containers"><a href="#Iterable-containers" class="headerlink" title="Iterable containers"></a>Iterable containers</h1><h2 id="List-string-tuple-slicing"><a href="#List-string-tuple-slicing" class="headerlink" title="List/string/tuple slicing"></a>List/string/tuple slicing</h2><p>slice can have 3 parameters:</p>
<ol>
<li>Start index (included, count from end of the list if negative, default as 0)</li>
<li>End index (excluded, count from end of the list if negative, default as end of the list)</li>
<li>Step</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">str    = <span class="string">'0123456'</span></span><br><span class="line">tp = tuple(str)    <span class="comment"># ('0', '1', '2', '3', '4', '5', '6')</span></span><br><span class="line">lst = list(str) <span class="comment"># ['0', '1', '2', '3', '4', '5', '6']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># get first 2</span></span><br><span class="line">str[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># get last 2</span></span><br><span class="line">str[<span class="number">5</span>:]</span><br><span class="line">str[<span class="number">-2</span>:]</span><br><span class="line"></span><br><span class="line"><span class="comment"># get odd number (the third number is the step)</span></span><br><span class="line">str[<span class="number">1</span>::<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># reverse</span></span><br><span class="line">str[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># get the 3 number from 1(included) and reverse it</span></span><br><span class="line">str[<span class="number">3</span>:<span class="number">0</span>:<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h2 id="List-Comprehensions"><a href="#List-Comprehensions" class="headerlink" title="List Comprehensions"></a>List Comprehensions</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cubes = [i**<span class="number">3</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>)]    <span class="comment"># [0, 1, 8, 27, 64]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># with if statement</span></span><br><span class="line">evenSquares = [i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>) <span class="keyword">if</span> i ** <span class="number">2</span> % <span class="number">2</span> == <span class="number">0</span>] <span class="comment"># [0, 4, 16]</span></span><br><span class="line">evenSquares = [i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">5</span>,<span class="number">2</span>)] <span class="comment"># [0, 4, 16]</span></span><br><span class="line">evens =  [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>) <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">0</span>] <span class="comment"># [0, 2, 4]</span></span><br></pre></td></tr></table></figure>
<h3 id="all-amp-any"><a href="#all-amp-any" class="headerlink" title="all &amp; any"></a>all &amp; any</h3><p>use all() / any() to check a list of bool.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">if</span> all([i &gt; <span class="number">5</span> <span class="keyword">for</span> i <span class="keyword">in</span> nums]):</span><br><span class="line">   print(<span class="string">"All larger than 5"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> any([i % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> nums]):</span><br><span class="line">   print(<span class="string">"At least one is even"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define a tuple</span></span><br><span class="line">t1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line">t2 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">t1 == t2 <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># unpack a tuple</span></span><br><span class="line">a,b,*c,d = range(<span class="number">10</span>)</span><br><span class="line">a <span class="comment"># 0</span></span><br><span class="line">b <span class="comment"># 1</span></span><br><span class="line">c <span class="comment"># [2,3,4,5,6,7,8]</span></span><br><span class="line">d <span class="comment"># 9</span></span><br></pre></td></tr></table></figure>
<h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><p><strong>Generators</strong> are a type of iterable, like lists or tuples. Unlike lists, they <strong>don’t allow indexing with arbitrary indices</strong>, but they can still be iterated through with <strong>for</strong> loops.<br>They can be created using functions and the <strong>yield</strong> statement.</p>
<p>Using <strong>generators</strong> results in improved performance, which is the result of the lazy (on demand) generation of values, which translates to lower memory usage. Furthermore, we do not need to wait until all the elements have been generated before we start to use them.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">spell</span><span class="params">()</span>:</span></span><br><span class="line">  word = <span class="string">''</span></span><br><span class="line">  <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'spam'</span>:</span><br><span class="line">    word += c</span><br><span class="line">    <span class="keyword">yield</span> word</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> spell():</span><br><span class="line">  print(w)</span><br><span class="line"></span><br><span class="line">print(list(spell()))    <span class="comment"># to normal list ['s', 'sp', 'spa', 'spam']</span></span><br></pre></td></tr></table></figure>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Sets can be combined using mathematical operations (list, tuple, dict do not support these operators)<br>The <strong>union</strong> operator <strong>|</strong> combines two sets to form a new one containing items in either.<br>The <strong>intersection</strong> operator <strong>&amp;</strong> gets items only in both.<br>The <strong>difference</strong> operator <strong>-</strong> gets items in the first set but not in the second.<br>The <strong>symmetric difference</strong> operator <strong>^</strong> gets items in either set, but not both.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">s2 = &#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;</span><br><span class="line"></span><br><span class="line">print(s1 | s2) <span class="comment"># union: &#123;1,2,3,4,5,6,7&#125;</span></span><br><span class="line">print(s1 &amp; s2) <span class="comment"># intersection: &#123;3,4,5&#125;</span></span><br><span class="line">print(s1 - s2) <span class="comment"># in s1 but not s2: &#123;1,2&#125;</span></span><br><span class="line">print(s2 - s1) <span class="comment"># in s2 but not s1: &#123;6,7&#125;</span></span><br><span class="line">print(s1 ^ s2) <span class="comment"># not in s1 or not in s2: &#123;1,2,6,7&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="String-format"><a href="#String-format" class="headerlink" title="String format"></a>String format</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####### hello world hello</span></span><br><span class="line"><span class="string">'&#123;0&#125; &#123;1&#125; &#123;0&#125;'</span>.format(<span class="string">'hello'</span>, <span class="string">'world'</span>)</span><br><span class="line"><span class="string">'&#123;x&#125; &#123;y&#125; &#123;x&#125;'</span>.format(x=<span class="string">'hello'</span>, y=<span class="string">'world'</span>)    <span class="comment"># use name</span></span><br><span class="line"></span><br><span class="line"><span class="string">r'fdjks/fjdkls'</span> <span class="comment"># r means raw, so you don't need to escape any character</span></span><br></pre></td></tr></table></figure>
<h1 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h1><h2 id="Function-Arguments"><a href="#Function-Arguments" class="headerlink" title="Function Arguments"></a>Function Arguments</h2><p>Using <strong><code>*args</code></strong> as a function parameter enables you to pass an arbitrary number of arguments to that function. The arguments are then accessible as the <strong>tuple</strong> args in the body of the function.</p>
<p><strong><em>\</em>kwargs</strong> (standing for keyword arguments) allows you to handle named arguments that you have not defined in advance. The keyword arguments return a dictionary in which the keys are the argument names, and the values are the argument values.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">(a, some_default=<span class="string">'this is a default value'</span>, *args, **kwargs)</span>:</span></span><br><span class="line">  print(a)</span><br><span class="line">  print(some_default)</span><br><span class="line">  print(args)</span><br><span class="line">  print(kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">some_func(<span class="string">'this is a'</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">this is a</span></span><br><span class="line"><span class="string">this is a default value</span></span><br><span class="line"><span class="string">()</span></span><br><span class="line"><span class="string">&#123;&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">some_func(<span class="string">'this is a'</span>, <span class="string">'value rather than default'</span>, <span class="string">'first arg'</span>, <span class="string">'second arg'</span>, first_kwarg=<span class="string">'1'</span>, second_kwarg=<span class="string">'2'</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">this is a</span></span><br><span class="line"><span class="string">value rather than default</span></span><br><span class="line"><span class="string">('first arg', 'second arg')</span></span><br><span class="line"><span class="string">&#123;'first_kwarg': '1', 'second_kwarg': '2'&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h2 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h2><p>A lambda defines an anoymous function. It consists of the <strong>lambda</strong> keyword followed by a list of arguments, a colon, and the <strong>expression</strong> to evaluate and return.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## use named function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cube</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x ** <span class="number">3</span>    </span><br><span class="line">print(cube(<span class="number">3</span>))    <span class="comment"># 27</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## use lambda</span></span><br><span class="line">cube = <span class="keyword">lambda</span> x: x ** <span class="number">3</span></span><br><span class="line">print(cube(<span class="number">3</span>))    <span class="comment"># 27</span></span><br></pre></td></tr></table></figure>
<h3 id="Common-used-functors"><a href="#Common-used-functors" class="headerlink" title="Common used functors:"></a>Common used functors:</h3><p>map, filter</p>
<p>module <strong>itertools</strong> is a standard library that contains several functions that are useful in FP.</p>
<p>One type of function it produces is infinite iterators.<br>The function <strong>count</strong> counts up infinitely from a value.<br>The function <strong>cycle</strong> infinitely iterates through an iterable (for instance a list or string).<br>The function <strong>repeat</strong> repeats an object, either infinitely or a specific number of times.<br><strong>takewhile -</strong> takes items from an iterable while a predicate function remains true;<br><strong>chain -</strong> combines several iterables into one long one;<br><strong>accumulate -</strong> returns a running total of values in an iterable.<br><strong>product</strong> - get possible combinations of some iterables<br><strong>permutation</strong> - get permutation of an iterable</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> accumulate, takewhile, product, permutations</span><br><span class="line"></span><br><span class="line">nums = list(accumulate(range(<span class="number">5</span>)))    <span class="comment"># [0,1,3,6,10]</span></span><br><span class="line">list(takewhile(<span class="keyword">lambda</span> x: x &lt;<span class="number">6</span>, nums)) <span class="comment"># [0,1,3]</span></span><br><span class="line"></span><br><span class="line">letters = (<span class="string">'a'</span>, <span class="string">'b'</span>)</span><br><span class="line">list(product(letters, range(<span class="number">2</span>)))    <span class="comment"># [(a,0), (a,1), (b,0), (b,1)] The result is always iterable of tuple</span></span><br><span class="line">list(permutations(letters))    <span class="comment"># [('a', 'b'), ('b', 'a')]</span></span><br></pre></td></tr></table></figure>
<h2 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a>Decorator</h2><p>Decorators provide a way to modify functions using other functions.</p>
<p>Python provides support to wrap a function in a decorator by pre-pending the function definition with a decorator name and the @ symbol.</p>
<blockquote>
<p>You can use a decorator if you want to modify more than one function in the same way. It’s the common template of multiple functions.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="comment">## define two decorators</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_print_deca</span><span class="params">(func)</span>:</span></span><br><span class="line">  <span class="comment">## this annotation make the callback return the original func's name instead of the wrap function's name.</span></span><br><span class="line"><span class="meta">  @wraps</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">wrap</span><span class="params">()</span>:</span></span><br><span class="line">    x = int(input(<span class="string">'x: '</span>))</span><br><span class="line">    y = int(input(<span class="string">'y: '</span>))</span><br><span class="line">    res = func(x, y)</span><br><span class="line">    print(<span class="string">'the res: &#123;0&#125;'</span>.format(res))</span><br><span class="line">  <span class="keyword">return</span> wrap</span><br><span class="line"></span><br><span class="line"><span class="comment">## use a decorator, and replace the origin method with the decorated one</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> x+y</span><br><span class="line">add = input_print_deca(add)    <span class="comment"># if the add method is a function from third library, you may want to add function to it, this way will help. However, you don't need to replace the original method, and you can just assign it to a new one.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## use @ grammar to quick add common code to a function. This has the same effect as the above equation.</span></span><br><span class="line"><span class="meta">@input_print_deca</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">diff</span><span class="params">(x, y)</span>:</span></span><br><span class="line">  <span class="keyword">return</span> x - y</span><br><span class="line"><span class="meta">@input_print_deca</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(x, y)</span>:</span></span><br><span class="line">  <span class="keyword">assert</span> y != <span class="number">0</span>, <span class="string">'cannot divide zero'</span></span><br><span class="line">    <span class="keyword">return</span> x / y</span><br><span class="line"></span><br><span class="line"><span class="comment">## call the decorated functions, notice now there's no input</span></span><br><span class="line">add()</span><br><span class="line">diff()</span><br><span class="line">divide()</span><br></pre></td></tr></table></figure>
<p>A single function can have multiple decorators. They are used from top to down. Everytime the original func is called, the current decorator is used.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## define anther two decorators</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">success_deca</span><span class="params">(func)</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">wrap</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    print(<span class="string">'in success deca'</span>)</span><br><span class="line">    res = func(x,y)</span><br><span class="line">    print(<span class="string">'yay success!'</span> + <span class="string">'*'</span> * <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  <span class="keyword">return</span> wrap</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">success_deca2</span><span class="params">(func)</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">wrap</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    print(<span class="string">'in success deca2'</span>)</span><br><span class="line">    res = func(x,y)</span><br><span class="line">    print(<span class="string">'yay success 2'</span> + <span class="string">'-'</span> * <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  <span class="keyword">return</span> wrap</span><br><span class="line"></span><br><span class="line"><span class="comment">## use all these decorators</span></span><br><span class="line"><span class="meta">@input_print_deca</span></span><br><span class="line"><span class="meta">@success_deca</span></span><br><span class="line"><span class="meta">@success_deca</span></span><br><span class="line"><span class="meta">@success_deca2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">diff</span><span class="params">(x,y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line"></span><br><span class="line"><span class="comment">## call the decorated func</span></span><br><span class="line">diff()</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">x: 5        # the call to diff() trigger the input_print_deca decorator</span></span><br><span class="line"><span class="string">y: 6</span></span><br><span class="line"><span class="string">in success deca            # in input_print_deca, the call to func trigger the first success_deca decorator</span></span><br><span class="line"><span class="string">in success deca            # in success_deca, the call to func trigger the second success_deca decorator</span></span><br><span class="line"><span class="string">in success deca2        # in the second success_deca, the call to func trigger the success_deca2 decorator</span></span><br><span class="line"><span class="string">yay success 2----------    # the success_deca2 first return</span></span><br><span class="line"><span class="string">yay success!**********    # the second success_deca return</span></span><br><span class="line"><span class="string">yay success!**********    # the first success_deca return</span></span><br><span class="line"><span class="string">the res: -1                            # the input_print_deca return</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="Generator-1"><a href="#Generator-1" class="headerlink" title="Generator"></a>Generator</h2><p>see <strong>Iterable Containers / Generator</strong> above.</p>
<h2 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h2><p>some links: </p>
<ul>
<li><p><a href="https://www.youtube.com/watch?v=E-1Y4kSsAFc" target="_blank" rel="noopener">Fear and Awaiting in Async: A Savage Journey to the Heart of the Coroutine Dream - youtube</a></p>
</li>
<li><p><a href="https://github.com/dabeaz/curio" target="_blank" rel="noopener">GitHub - dabeaz/curio: Good Curio!</a> a library to separate the asynchronus world and synchronus world by the author of the above video.</p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/38575715" target="_blank" rel="noopener">Python Asyncio与多线程/多进程那些事</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/27258289" target="_blank" rel="noopener">Python Async/Await入门指南</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/25354747" target="_blank" rel="noopener">从0到1，Python网络编程的入门之路</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/25228075" target="_blank" rel="noopener">从0到1，Python异步编程的演进之路</a></p>
<p><code>async</code> create a coroutine which should be excuted when called. Use <code>await</code> in an async function to hung up the coroutine itself until the awaited coroutine finished. <code>await</code> can only be used in <code>async</code> functions. The  object after <code>await</code> must be an <code>Awaitable</code> (as long as you implement <code>__await__()</code>, it’s an <code>Awaitable</code>.  <code>Coroutine</code> extends from <code>Awaitable</code>)</p>
<p><code>async</code> can be used anywhere except for:</p>
</li>
</ul>
<ul>
<li><p>lambda</p>
</li>
<li><p>list comprehension (available since python 3.6)</p>
</li>
<li><p>default methods (e.g. <code>__init__()</code>), but we can use metaclass to make <code>__init__</code> awaitable.</p>
</li>
</ul>
<h3 id="eventloop"><a href="#eventloop" class="headerlink" title="eventloop"></a>eventloop</h3><p>The essence of aysncio is an eventloop. All awaitables are added to the eventloop and  wait for executing sequentially. If an event is interrupted by IO or sth, another event will be executed. </p>
<p>For every thread, it has its own eventloop. Events in different eventloops cannot communicate.</p>
<p>So basically, events in asyncio are executed sequentially, whereas their requests to IO may be paralled.</p>
<p>And the <code>await</code> keyword means to emit the Awaitable event at once and the program will wait until it finishes. Thus if we want to emit two or more Awaitable events at almost the same time, we use <code>asyncio.create_task(awaitable)</code>. </p>
<blockquote>
<p>(function) create_task: (coro: Generator[Any, None, _T@create_task] | Coroutine[Any, Any, _T@create_task], *, name: str | None = …) -&gt; Task[_T@create_task]</p>
<hr>
<p>Schedule the execution of a coroutine object in a spawn task. </p>
<p>Return a Task object.</p>
</blockquote>
<p>When using <code>create_task</code>, the Awaitable is told to be emited as soon as possible. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time, time_ns</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ns_to_time</span><span class="params">(nanoseconds)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> timedelta(microseconds=(nanoseconds/<span class="number">1000</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">now</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">return</span> ns_to_time(time_ns())</span><br><span class="line"></span><br><span class="line">first_times = []</span><br><span class="line">second_times = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">print_first</span><span class="params">(n, if_print = True)</span>:</span></span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;now()&#125;</span>: first print start.'</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        anow = time_ns()</span><br><span class="line">        first_times.append(anow)</span><br><span class="line">        <span class="keyword">if</span> if_print:</span><br><span class="line">            print(<span class="string">f'<span class="subst">&#123;ns_to_time(anow)&#125;</span>: first-<span class="subst">&#123;i&#125;</span>'</span>)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(<span class="number">0.1</span>)</span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;now()&#125;</span>: first print end.'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">print_second</span><span class="params">(n, if_print = True)</span>:</span></span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;now()&#125;</span>: second print start.'</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        anow = time_ns()</span><br><span class="line">        second_times.append(anow)</span><br><span class="line">        <span class="keyword">if</span> if_print:</span><br><span class="line">            print(<span class="string">f'<span class="subst">&#123;ns_to_time(anow)&#125;</span>: second-<span class="subst">&#123;i&#125;</span>'</span>)</span><br><span class="line">        <span class="keyword">await</span> asyncio.sleep(<span class="number">0.1</span>)</span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;now()&#125;</span>: second print end.'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># task1 &amp; task2 are emitted immediately</span></span><br><span class="line">    task1 = asyncio.create_task(print_first(<span class="number">5</span>))</span><br><span class="line">    task2 = asyncio.create_task(print_second(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># wait for the two tasks to finish, or the program will end while the tasks are still running.</span></span><br><span class="line">    <span class="keyword">await</span> task1</span><br><span class="line">    <span class="keyword">await</span> task2</span><br><span class="line"></span><br><span class="line">    <span class="comment"># no intersection and the print result shows that all the events are executed sequentially</span></span><br><span class="line">    print(first_times)</span><br><span class="line">    print(second_times)</span><br><span class="line">    print(<span class="string">f'the intersected times: <span class="subst">&#123;set(first_times) &amp; set(second_times)&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br></pre></td></tr></table></figure>
<h3 id="async-amp-decorator"><a href="#async-amp-decorator" class="headerlink" title="async &amp; decorator"></a>async &amp; decorator</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个 anotation, 可以根据 function 是否在 async 环境运行</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">from_coro</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> bool(sys._getframe(n).f_code.co_flags &amp; <span class="number">0x80</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(coro)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        coro.send(<span class="literal">None</span>)</span><br><span class="line">    <span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> e.value</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">awaitable</span><span class="params">(syncfunc)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(asyncfunc)</span>:</span></span><br><span class="line"><span class="meta">        @wraps(asyncfunc)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> from_coro(<span class="number">2</span>):</span><br><span class="line">                print(<span class="string">'from coro...'</span>)</span><br><span class="line">                <span class="keyword">return</span> asyncfunc(*args, **kwargs)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">'not from coro...'</span>)</span><br><span class="line">                <span class="keyword">return</span> syncfunc(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">spam</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'the blue one'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@awaitable(spam)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">spam</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'the red one'</span>)</span><br><span class="line"></span><br><span class="line">spam()</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">await</span> spam()</span><br></pre></td></tr></table></figure>
<h3 id="Awaitable-amp-Coroutine-class"><a href="#Awaitable-amp-Coroutine-class" class="headerlink" title="Awaitable &amp; Coroutine class"></a>Awaitable &amp; Coroutine class</h3><p>The object after <code>await</code> must be an <code>Awaitable</code> (as long as you implement <code>__await__()</code>, it’s an <code>Awaitable</code>. <code>Coroutine</code> extends from <code>Awaitable</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The abstract `Awaitable` and `Coroutine` class:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Awaitable</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line">    __slots__ = ()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__await__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__subclasshook__</span><span class="params">(cls, C)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">is</span> Awaitable:</span><br><span class="line">            <span class="keyword">return</span> _check_methods(C, <span class="string">"__await__"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">NotImplemented</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coroutine</span><span class="params">(Awaitable)</span>:</span></span><br><span class="line">    __slots__ = ()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">send</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">throw</span><span class="params">(self, typ, val=None, tb=None)</span>:</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close</span><span class="params">(self)</span>:</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__subclasshook__</span><span class="params">(cls, C)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">is</span> Coroutine:</span><br><span class="line">            <span class="keyword">return</span> _check_methods(C, <span class="string">'__await__'</span>, <span class="string">'send'</span>, <span class="string">'throw'</span>, <span class="string">'close'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">NotImplemented</span></span><br></pre></td></tr></table></figure>
<h2 id="Some-convinent-functions"><a href="#Some-convinent-functions" class="headerlink" title="Some convinent functions"></a>Some convinent functions</h2><ul>
<li><code>help</code>: eg. <code>help(Exception)</code> or <code>help(e)</code>, to get the methods &amp; data in a class/object</li>
<li><code>dir</code> : eg. <code>dir(Exception)</code> or <code>dir(e)</code>, is a simple version of <code>help</code>, shows all members as a string</li>
<li><code>inspect.getmro(type(e))</code>: get the class hierachy of a type</li>
</ul>
<h1 id="Major-3rd-Party-Libraries"><a href="#Major-3rd-Party-Libraries" class="headerlink" title="Major 3rd-Party Libraries"></a>Major 3rd-Party Libraries</h1><p><strong>Django</strong>: The most frequently used web framework written in Python, Django powers websites that include Instagram and Disqus. It has many useful features, and whatever features it lacks are covered by extension packages.<br><strong>CherryPy</strong> and <strong>Flask</strong> are also popular web frameworks.<br><strong>BeautifulSoup</strong> is very useful when scraping data from websites, and leads to better results than building your own scraper with regular expressions.</p>
<p>A number of third-party modules are available that make it much easier to carry out scientific and mathematical computing with Python.<br>The module <strong>matplotlib</strong> allows you to create graphs based on data in Python.<br>The module <strong>NumPy</strong> allows for the use of multidimensional arrays that are much faster than the native Python solution of nested lists. It also contains functions to perform mathematical operations such as matrix transformations on the arrays.<br>The library <strong>SciPy</strong> contains numerous extensions to the functionality of <strong>NumPy</strong>.</p>
<p>Python can also be used for <strong>game development</strong>.<br>Usually, it is used as a scripting language for games written in other languages, but it can be used to make games by itself.<br>For 3D games, the library <strong>Panda3D</strong> can be used. For 2D games, you can use <strong>pygame</strong>.</p>
<h1 id="Issues"><a href="#Issues" class="headerlink" title="# Issues"></a># Issues</h1><h2 id="Make-class-method-return-self-type"><a href="#Make-class-method-return-self-type" class="headerlink" title="Make class method return self type"></a>Make class method return self type</h2><p><a href="https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class" target="_blank" rel="noopener">https://stackoverflow.com/questions/33533148/how-do-i-type-hint-a-method-with-the-type-of-the-enclosing-class</a></p>
<p>If you are using Python 3.10 or later, it just works. As of today (2019) in 3.7+ you must turn this feature on using a future statement (<code>from __future__ import annotations</code>) - for Python 3.6 or below use a string.</p>
<h3 id="Python-3-7-from-future-import-annotations"><a href="#Python-3-7-from-future-import-annotations" class="headerlink" title="Python 3.7+: from __future__ import annotations"></a>Python 3.7+: <code>from __future__ import annotations</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> annotations</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Position</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other: Position)</span> -&gt; Position:</span></span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>
<h3 id="Python-lt-3-7-use-a-string"><a href="#Python-lt-3-7-use-a-string" class="headerlink" title="Python &lt;3.7: use a string"></a>Python &lt;3.7: use a string</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Position</span>:</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other: <span class="string">'Position'</span>)</span> -&gt; 'Position':</span></span><br><span class="line">       ...</span><br></pre></td></tr></table></figure>
<h2 id="Circular-import"><a href="#Circular-import" class="headerlink" title="Circular import"></a>Circular import</h2><p><a href="https://zhuanlan.zhihu.com/p/66228942" target="_blank" rel="noopener">circular import</a></p>
<p>modify the position of import to fix the issues</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/03/01/k8s/" rel="prev" title="k8s general">
                  <i class="fa fa-chevron-left"></i> k8s general
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/06/05/c-sharp-basic/" rel="next" title="c# basic">
                  c# basic <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cherish</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">269k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">4:04</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
